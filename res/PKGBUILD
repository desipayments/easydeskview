pkgname=easydeskview
pkgver=1.4.5
pkgrel=0
epoch=
pkgdesc=""
arch=('x86_64')
url=""
license=('AGPL-3.0')
groups=()
depends=('gtk3' 'xdotool' 'libxcb' 'libxfixes' 'alsa-lib' 'libva' 'libappindicator-gtk3' 'pam' 'gst-plugins-base' 'gst-plugin-pipewire')
makedepends=()
checkdepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=pacman_install
changelog=
noextract=()
md5sums=() #generate with 'makepkg -g'

package() {
  if [[ ${FLUTTER} ]]; then
	  mkdir -p "${pkgdir}/usr/share/easydeskview" && cp -r ${HBB}/flutter/build/linux/x64/release/bundle/* -t "${pkgdir}/usr/share/easydeskview"
  fi
  mkdir -p "${pkgdir}/usr/bin"
  pushd ${pkgdir}
  if [[ -f usr/share/easydeskview/easydeskview ]]; then
    ln -s /usr/share/easydeskview/easydeskview usr/bin/easydeskview
    ln -s /usr/share/easydeskview/easydeskview usr/bin/rustdesk
  else
    ln -s /usr/share/easydeskview/rustdesk usr/bin/easydeskview
    ln -s /usr/share/easydeskview/rustdesk usr/bin/rustdesk
  fi
  popd
  install -Dm 644 $HBB/res/easydeskview.service -t "${pkgdir}/usr/share/easydeskview/files"
  install -Dm 644 $HBB/res/easydeskview.desktop -t "${pkgdir}/usr/share/easydeskview/files"
  install -Dm 644 $HBB/res/easydeskview-link.desktop -t "${pkgdir}/usr/share/easydeskview/files"
  install -Dm 644 $HBB/res/128x128@2x.png "${pkgdir}/usr/share/icons/hicolor/256x256/apps/easydeskview.png"
  install -Dm 644 $HBB/res/scalable.svg "${pkgdir}/usr/share/icons/hicolor/scalable/apps/easydeskview.svg"
}
